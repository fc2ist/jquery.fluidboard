/*! jQuery Fluid Board - v1.0.0 - 2012-09-28
* Copyright (c) 2012 moi; Licensed MIT */
(function(a,b){var c,d;return d={colnum:2,itemSelector:null,responsive:0,resize:!0,gutter:10,throttle:5,isAnimated:!1,animationOptions:{duration:200,easing:"linear",queue:!1}},c=function(){function p(b,d){this.config=d,this.config._target=b,this.config._win=a(window),p.stack=p.stack||{},b.imagesLoaded(a.proxy(c,this))}var c,e,f,g,h,i,j,k,l,m,n,o;return p.prototype.reload=function(){return this.config._target.imagesLoaded(a.proxy(c,this,!0))},p.prototype.destroy=function(){var a;return a=this.config,o.call(this),j.call(this),a._target.removeData(b)},p.prototype.setOption=function(b,c){var e;typeof b=="string"&&c&&(e={},e[b]=c,b=e);if(typeof b!="object")return;return this.config=a.extend(!0,{},this.config,d,b),this.reload()},c=function(a){var b;b=this.config,b._items=l.call(this),b._clones=k.call(this),b.responsive>0&&(b.colnum=n.call(this)),h.call(this),i.call(this),f.call(this);if(b.resize&&a!==!0)return g.call(this)},g=function(){var b,c,d;return d=this,b=this.config,b._id=(new Date).getTime(),p.stack[b._id]={elem:b._target,data:this},p.event=p.event||!1,p.event||(p.event=!0,c=function(){var a,d,e,f;c.i=c.i||0;if(c.i++%b.throttle)return;e=p.stack,f=[];for(a in e){d=e[a];if(!d)continue;f.push(d.elem.trigger("resize"))}return f},b._win.on("resize.flipboard",c)),b._target.on("resize.flipboard",a.proxy(this.reload,this))},o=function(){var a,b,c,d,e;a=this.config,p.stack[a._id]=null,b=!1,e=p.stack;for(c in e)d=e[c],d&&(b=!0);return b||(p.event=!1,a._win.off("resize.flipboard")),a._target.off("resize.flipboard")},f=function(){var b,c,d,f,g,h,i,j,k,l,n,o,p;b=this.config,b._target.css("position","relative"),b._clones.each(function(c){var d,e,f;return d=c%b.colnum,f=a(this),e=b.colnum-1===d?b.gutter:0,f.outerWidth(b._colWidths[d])}),b._colHeights=[],b._clones.each(a.proxy(e,this)),i=0;for(g=l=0,o=b.colnum;0<=o?l<o:l>o;g=0<=o?++l:--l)i=Math.max(i,b._colHeights[g]);f=[];for(g=n=0,p=b.colnum;0<=p?n<p:n>p;g=0<=p?++n:--n)f[g]=f[g]||0,f[g]=i-b._colHeights[g];return c=[],h=b._items.length,j=Math.floor(h/b.colnum),d=h%b.colnum,k=m(b._target),b._items.each(function(e){var h,i,l,m,n,o,p,q;l=e%b.colnum,c[l]=c[l]||0,i=d>l?j+1:j,m=f[l]/i,n=a(this),h=b._clones.eq(e),o=l*b.gutter;if(l>0)for(g=q=0;0<=l?q<l:q>l;g=0<=l?++q:--q)o+=b._colWidths[g];return p={position:"absolute",top:k.top+c[l]+"px",left:k.left+o+"px",margin:0,height:h.height()+m,width:h.width()},b.isAnimated?n.css("position","absolute").stop().animate(p,b.animationOptions.duration,b.animationOptions.easing,b.animationOptions.queue):n.css(p),c[l]+=h.outerHeight()+m+b.gutter}),b._target.height(i-b.gutter),b._clones.remove()},j=function(){return this.config._items.css({width:"",height:"",position:"",top:"",left:"",margin:""})},h=function(){var b;return b=this.config,b._colHeights=[],b._clones.each(function(c){var d,e,f;return d=c%b.colnum,e=a(this),f=b._target.width()/b.colnum-b.gutter,b.colnum-1===d&&(f+=b.gutter),e.outerWidth(f)}),b._clones.css("height","auto"),b._clones.each(a.proxy(e,this))},e=function(b,c){var d,e;return d=this.config,e=b%d.colnum,d._colHeights[e]=d._colHeights[e]||0,d._colHeights[e]+=a(c).outerHeight()+d.gutter},i=function(){var a,b,c,d,e,f,g,h,i,j;a=this.config,e=0;for(c=f=0,h=a.colnum-1;0<=h?f<=h:f>=h;c=0<=h?++f:--f)e+=a._colHeights[c];b=a._clones.eq(0).outerWidth(),d=e/a.colnum,a._colWidths=[],j=[];for(c=g=0,i=a.colnum;0<=i?g<i:g>i;c=0<=i?++g:--g)j.push(a._colWidths[c]=b*(a._colHeights[c]/d));return j},l=function(){var b;return b=this.config,b.itemSelector?a(b.itemSelector,b._target):b._target.children()},k=function(){var a;return a=this.config,a._items.clone().hide().css({transition:"none",height:"auto"}).appendTo(a._target)},n=function(){var a,b,c;return a=this.config,c=Math.ceil(a._target.width()/a.responsive),b=a._items.length,Math.min(c,b)},m=function(a){var b,c;return c=a.css("padding-top"),typeof c=="string"&&(c=c.indexOf("px")===-1?0:c.replace("px","")-0),b=a.css("padding-left"),typeof b=="string"&&(b=b.indexOf("px")===-1?0:b.replace("px","")-0),{top:c,left:b}},p}(),a.fn.flipboard=function(e){var f;return f=Array.prototype.slice.call(arguments),f.length>1&&(f=Array.prototype.slice.call(arguments,1)),this.each(function(g){var h,i;h=a(this),i=h.data(b);if(!i&&typeof e!="string")return typeof e!="object"&&(e={}),h.data(b,new c(h,a.extend(!0,{},d,e)));if(!i)return!1;if(e==="reload")return i.reload(!0);if(e==="destroy")return i.destroy(),i=null;if(e==="option")return i.setOption.apply(i,f)})}})(jQuery,"jquery-plugin-flipboard"),function(a,b){var c="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";a.fn.imagesLoaded=function(d){function e(){var b=a(m),c=a(o);h&&(o.length?h.reject(j,b,c):h.resolve(j)),a.isFunction(d)&&d.call(g,j,b,c)}function f(b,d){b.src===c||-1!==a.inArray(b,l)||(l.push(b),d?o.push(b):m.push(b),a.data(b,"imagesLoaded",{isBroken:d,src:b.src}),i&&h.notifyWith(a(b),[d,j,a(m),a(o)]),j.length===l.length&&(setTimeout(e),j.unbind(".imagesLoaded")))}var g=this,h=a.isFunction(a.Deferred)?a.Deferred():0,i=a.isFunction(h.notify),j=g.find("img").add(g.filter("img")),l=[],m=[],o=[];return j.length?j.bind("load.imagesLoaded error.imagesLoaded",function(a){f(a.target,"error"===a.type)}).each(function(d,e){var g=e.src,h=a.data(e,"imagesLoaded");if(h&&h.src===g)f(e,h.isBroken);else if(e.complete&&e.naturalWidth!==b)f(e,0===e.naturalWidth||0===e.naturalHeight);else if(e.readyState||e.complete)e.src=c,e.src=g}):e(),h?h.promise(g):g}}(jQuery);