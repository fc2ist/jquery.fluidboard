/*! jQuery Fluid Board - v1.0.1 - 2012-10-02
* Copyright (c) 2012 moi; Licensed MIT */
(function(a,b){var c,d;return d={colnum:2,itemSelector:null,responsive:0,resize:!0,gutter:10,throttle:5,className:{edgeTop:"edge-top",edgeLeft:"edge-left",edgeRight:"edge-right",edgeBottom:"edge-bottom"},isAnimated:!1,animationOptions:{duration:200,easing:"linear",queue:!1}},c=function(){function r(b,d){this.config=d,this.config._target=b,this.config._win=a(window),r.stack=r.stack||{},b.imagesLoaded(a.proxy(c,this))}var c,e,f,g,h,i,j,k,l,m,n,o,p,q;return r.prototype.reload=function(){return this.config._target.imagesLoaded(a.proxy(c,this,!0))},r.prototype.destroy=function(){var a;return a=this.config,q.call(this),k.call(this),a._target.removeData(b)},r.prototype.setOption=function(b,c){var e;typeof b=="string"&&c&&(e={},e[b]=c,b=e);if(typeof b!="object")return;return this.config=a.extend(!0,{},this.config,d,b),this.reload()},c=function(a){var b;b=this.config,b._items=n.call(this),b._clones=m.call(this),b.responsive>0&&(b.colnum=p.call(this)),i.call(this),j.call(this),g.call(this);if(b.resize&&a!==!0)return h.call(this)},h=function(){var b,c,d;return d=this,b=this.config,b._id=(new Date).getTime(),r.stack[b._id]={elem:b._target,data:this},r.event=r.event||!1,r.event||(r.event=!0,c=function(){var a,d,e,f;c.i=c.i||0;if(c.i++%b.throttle)return;e=r.stack,f=[];for(a in e){d=e[a];if(!d)continue;f.push(d.elem.trigger("resize"))}return f},b._win.on("resize.fluidboard",c)),b._target.on("resize.fluidboard",a.proxy(this.reload,this))},q=function(){var a,b,c,d,e;a=this.config,r.stack[a._id]=null,b=!1,e=r.stack;for(c in e)d=e[c],d&&(b=!0);return b||(r.event=!1,a._win.off("resize.fluidboard")),a._target.off("resize.fluidboard")},g=function(){var b,c,d,g,h,i,j,k,m,n,p,q,r,s,t;p=this,b=this.config,b._target.css("position","relative"),b._clones.each(function(c){var d,e,f;return d=c%b.colnum,f=a(this),e=b.colnum-1===d?b.gutter:0,f.outerWidth(b._colWidths[d])}),b._colHeights=[],b._clones.each(a.proxy(f,this)),k=0;for(i=q=0,s=b.colnum;0<=s?q<s:q>s;i=0<=s?++q:--q)k=Math.max(k,b._colHeights[i]);h=[];for(i=r=0,t=b.colnum;0<=t?r<t:r>t;i=0<=t?++r:--r)h[i]=h[i]||0,h[i]=k-b._colHeights[i];return d=[],j=b._items.length,m=Math.floor(j/b.colnum),g=j%b.colnum,n=o(b._target),c=l.call(this),b._items.each(function(f){var k,l,o,q,r,s,t,u;o=f%b.colnum,d[o]=d[o]||0,l=g>o?m+1:m,q=h[o]/l,r=a(this),k=b._clones.eq(f),s=o*b.gutter;if(o>0)for(i=u=0;0<=o?u<o:u>o;i=0<=o?++u:--u)s+=b._colWidths[i];return t={position:"absolute",top:n.top+d[o]+"px",left:n.left+s+"px",margin:0,height:k.height()+q,width:k.width()},b.isAnimated?r.css("position","absolute").stop().animate(t,b.animationOptions.duration,b.animationOptions.easing,b.animationOptions.queue):r.css(t),d[o]+=k.outerHeight()+q+b.gutter,r.removeClass(c),e.call(p,r,j,f,o,l)}),b._target.height(k-b.gutter),b._clones.remove()},k=function(){return this.config._items.css({width:"",height:"",position:"",top:"",left:"",margin:""}).removeClass(l.call(this))},l=function(){var a,b,c,d;b=this.config.className,a=[];for(c in b){d=b[c];if(typeof d!="string")continue;a.push(d)}return a.join(" ")},e=function(a,b,c,d,e){var f,g,h,i;g=this.config,h=g.className,f=[],i=Math.floor(c/g.colnum),d===0&&f.push(h.edgeLeft),d===g.colnum-1&&f.push(h.edgeRight),i===0&&f.push(h.edgeTop),i===e-1&&f.push(h.edgeBottom);if(f.length>0)return a.addClass(f.join(" "))},i=function(){var b;return b=this.config,b._colHeights=[],b._clones.each(function(c){var d,e,f;return d=c%b.colnum,e=a(this),f=b._target.width()/b.colnum-b.gutter,b.colnum-1===d&&(f+=b.gutter),e.outerWidth(f)}),b._clones.css("height","auto"),b._clones.each(a.proxy(f,this))},f=function(b,c){var d,e;return d=this.config,e=b%d.colnum,d._colHeights[e]=d._colHeights[e]||0,d._colHeights[e]+=a(c).outerHeight()+d.gutter},j=function(){var a,b,c,d,e,f,g,h,i,j;a=this.config,e=0;for(c=f=0,h=a.colnum-1;0<=h?f<=h:f>=h;c=0<=h?++f:--f)e+=a._colHeights[c];b=a._clones.eq(0).outerWidth(),d=e/a.colnum,a._colWidths=[],j=[];for(c=g=0,i=a.colnum;0<=i?g<i:g>i;c=0<=i?++g:--g)j.push(a._colWidths[c]=b*(a._colHeights[c]/d));return j},n=function(){var b;return b=this.config,b.itemSelector?a(b.itemSelector,b._target):b._target.children()},m=function(){var a;return a=this.config,a._items.clone().hide().css({transition:"none",height:"auto"}).appendTo(a._target)},p=function(){var a,b,c;return a=this.config,c=Math.ceil(a._target.width()/a.responsive),b=a._items.length,Math.min(c,b)},o=function(a){var b,c;return c=a.css("padding-top"),typeof c=="string"&&(c=c.indexOf("px")===-1?0:c.replace("px","")-0),b=a.css("padding-left"),typeof b=="string"&&(b=b.indexOf("px")===-1?0:b.replace("px","")-0),{top:c,left:b}},r}(),a.fn.fluidboard=function(e){var f;return f=Array.prototype.slice.call(arguments),f.length>1&&(f=Array.prototype.slice.call(arguments,1)),this.each(function(g){var h,i;h=a(this),i=h.data(b);if(!i&&typeof e!="string")return typeof e!="object"&&(e={}),h.data(b,new c(h,a.extend(!0,{},d,e)));if(!i)return!1;if(e==="reload")return i.reload(!0);if(e==="destroy")return i.destroy(),i=null;if(e==="option")return i.setOption.apply(i,f)})}})(jQuery,"jquery-plugin-fluidboard"),function(a,b){var c="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";a.fn.imagesLoaded=function(d){function e(){var b=a(m),c=a(o);h&&(o.length?h.reject(j,b,c):h.resolve(j)),a.isFunction(d)&&d.call(g,j,b,c)}function f(b,d){b.src===c||-1!==a.inArray(b,l)||(l.push(b),d?o.push(b):m.push(b),a.data(b,"imagesLoaded",{isBroken:d,src:b.src}),i&&h.notifyWith(a(b),[d,j,a(m),a(o)]),j.length===l.length&&(setTimeout(e),j.unbind(".imagesLoaded")))}var g=this,h=a.isFunction(a.Deferred)?a.Deferred():0,i=a.isFunction(h.notify),j=g.find("img").add(g.filter("img")),l=[],m=[],o=[];return j.length?j.bind("load.imagesLoaded error.imagesLoaded",function(a){f(a.target,"error"===a.type)}).each(function(d,e){var g=e.src,h=a.data(e,"imagesLoaded");if(h&&h.src===g)f(e,h.isBroken);else if(e.complete&&e.naturalWidth!==b)f(e,0===e.naturalWidth||0===e.naturalHeight);else if(e.readyState||e.complete)e.src=c,e.src=g}):e(),h?h.promise(g):g}}(jQuery);